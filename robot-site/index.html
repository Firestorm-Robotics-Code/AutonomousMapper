<!DOCTYPE html>

<html lang="en">
    <body>
        <meta charset="utf-8">
        <title>Autonomous Mapper</title> 
    </body>
    <head>
        <h1>Autonomous Mapper</h1>
        <h2>Presets</h2>
        <button id="preset-place-ramp">Place high and ramp</button>
        <button id="preset-place-taxi-short">Place high and taxi short</button>
        <button id="preset-place-taxi-long">Place high and taxi long</button>
        <h2>Options</h2>
        <button id="place-high-cube" value="Place high cube">Place High Cube</button>
        <button id="auto-ramp" value="Auto ramp">Auto ramp</button>
        <button id="taxi-out-short" value="Taxi out short side">Taxi out on short side</button>
        <button id="taxi-out-long" value="Taxi out long side">Taxi out on long side</button>
        <p></p>
        <button id="reset" value="Clear">Clear all</button>
        <h2>Instructions</h2>
        <ol id="total-list"></ol>
        <p></p>
        <button id="apply">Apply</button>
        
        
        <script>
            var current = "";
            
            function removeAll() {
                document.getElementById("total-list").innerHTML = "";
            }

            function removeItem(item) {
                document.getElementById("total-list").removeChild(item);
            }

            function addToList(itemId) {
                var li = document.createElement('LI');
                var input = document.getElementById(itemId);
                li.innerHTML = input.value + "  ";      // give it space between the button
                document.getElementById("total-list").appendChild(li);
                var delButton = document.createElement('BUTTON');
                var add = document.createTextNode("Delete");
                delButton.appendChild(add);
                delButton.onclick = () => { removeItem(li) };

                li.appendChild(delButton);

                current = input.value + ",";
            }

            function setPresetRamp() {
                removeAll();

                addToList("place-high-cube");
                addToList("auto-ramp");
            }

            function setPresetPlaceTaxiShort() {
                removeAll();

                addToList("place-high-cube");
                addToList("taxi-out-short");
            }

            function setPresetPlaceTaxiLong() {
                removeAll();

                addToList("place-high-cube");
                addToList("taxi-out-long");
            }

            function uploadAll() {
                fetch("/api/postRobotCommands", {
                    method: 'POST',
                    body: "hello"
                });
                alert("Autonomous successfully uploaded!")
            }

            document.getElementById("place-high-cube").onclick = () => { addToList("place-high-cube") };
            document.getElementById("auto-ramp").onclick = () => { addToList("auto-ramp") };
            document.getElementById("taxi-out-short").onclick = () => { addToList("taxi-out-short") };
            document.getElementById("taxi-out-long").onclick = () => { addToList("taxi-out-long") };
            document.getElementById("preset-place-ramp").onclick = () => { setPresetRamp() };
            document.getElementById("preset-place-taxi-short").onclick = () => { setPresetPlaceTaxiShort() };
            document.getElementById("preset-place-taxi-long").onclick = () => { setPresetPlaceTaxiLong() };
            var test
            document.getElementById("reset").onclick = () => { removeAll() };

            document.getElementById("apply").onclick = () => { uploadAll() };
        </script>
    </head>
</html>